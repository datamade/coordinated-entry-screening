{% extends "base.html" %}
{% block title %}Dashboard{% endblock %}
{% block content %}


<h2>Open sessions</h2>
<div class='row'>
    <div class='col-md-12'>
        <h4><span class='badge badge-pill badge-primary'>{{ open_sessions }}</span> users have open sessions</h4>
        <p>These users started a survey in the last 24 hours.</p>
        <div id="open-chart" style="min-width: 310px; height: 400px; margin: 0 auto"></div>
    </div>
</div>

<h2>Canceled sessions</h2>
<div class='row'>
    <div class='col-md-12'>
        <h4><span class='badge badge-pill badge-primary'>{{ canceled_sessions }}</span> users canceled their session</h4>
        <p>These users canceled their session, either by instructing the tool to close thier session (e.g. by typing "end") or by abandoning their session after 24 hours. This chart shows the question or resource on which users canceled their sessions.</p>
        <div id="canceled-chart" style="min-width: 310px; height: 400px; margin: 0 auto"></div>
    </div>
</div>

<h2>Completed sessions</h2>
<div class='row'>
    <div class='col-md-12'>
        <h4><span class='badge badge-pill badge-primary'>{{ completed_sessions }}</span> users completed their session</h4>
        <p>These users completed the entire survey! This chart shows the last resource recommended to the user.</p>
        <div id="completed-chart" style="min-width: 310px; height: 400px; margin: 0 auto"></div>
    </div>
</div>

<hr>

<h2>Recommended Resources</h2>
<div class='row'>
    <div class='col-md-12'>
        <p>This chart shows the total number of times each resource has been recommended.</p>
        <div id="resources-chart" style="min-width: 310px; height: 400px; margin: 0 auto"></div>
    </div>
</div>




{% endblock %}

{% block extra_javascript %}

<script>
    $(function() {
        open_sessions_chart = '{{open_sessions_chart | escapejs}}'
        barHelper('open-chart', open_sessions_chart);

        canceled_sessions_chart = '{{canceled_sessions_chart | escapejs}}';
        barHelper('canceled-chart', canceled_sessions_chart);

        completed_sessions_chart = '{{completed_sessions_chart | escapejs}}';
        barHelper('completed-chart', completed_sessions_chart);

        resources_chart = '{{resources_chart | escapejs}}';
        barHelper('resources-chart', resources_chart);

    });
</script>

{% endblock extra_javascript %}